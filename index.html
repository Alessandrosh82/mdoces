<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MDoces - Doceria Delivery</title>
  <style>
    /* Fonte */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

    :root {
      --azul-base: #011941;
      --azul-base-dark: #000f2a;
      --azul-base-light: #0a2a74;
      --white: #fff;
      --gray-light: #f5f5f5;
      --gray-dark: #555;
      --green: #25d366;
      --radius: 12px;
      --shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--gray-light);
      margin: 0;
      color: #222;
      line-height: 1.4;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: var(--azul-base);
      color: var(--white);
      text-align: center;
      padding: 1.8rem 1rem 1.2rem;
      box-shadow: var(--shadow);
    }

    header h1 {
      margin-bottom: 0.3rem;
      font-weight: 700;
      font-size: 2rem;
      letter-spacing: 1px;
    }

    header p {
      font-weight: 400;
      font-size: 1rem;
      opacity: 0.85;
      margin-top: 0;
    }

    main.container {
      max-width: 960px;
      margin: 2rem auto;
      padding: 0 1rem;
      flex: 1;
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    /* Se√ß√µes do site */
    #produtos {
      flex: 2 1 320px;
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(150px,1fr));
      gap: 1rem;
    }

    .produto-card {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .produto-card:hover,
    .produto-card:focus {
      transform: translateY(-5px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      outline: none;
    }

    .produto-img {
      width: 100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      border-radius: var(--radius);
      margin-bottom: 0.8rem;
    }

    .produto-nome {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
      color: var(--azul-base-dark);
    }

    .produto-descricao {
      flex-grow: 1;
      font-size: 0.9rem;
      color: var(--gray-dark);
      margin-bottom: 0.6rem;
      min-height: 38px;
    }

    .produto-preco {
      font-weight: 700;
      font-size: 1rem;
      color: var(--azul-base-light);
      margin-bottom: 0.5rem;
    }

    .btn-add {
      background: var(--azul-base-light);
      color: var(--white);
      border: none;
      border-radius: 6px;
      padding: 0.4rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .btn-add:hover,
    .btn-add:focus {
      background: var(--azul-base-dark);
      outline: none;
    }

    /* Carrinho e formul√°rio */
    #carrinho {
      flex: 1 1 320px;
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1rem 1.5rem;
      display: flex;
      flex-direction: column;
      max-height: 600px;
      overflow-y: auto;
    }

    #carrinho h2 {
      margin-top: 0;
      margin-bottom: 1rem;
      color: var(--azul-base);
      font-weight: 700;
    }

    #itens-carrinho {
      list-style: none;
      padding-left: 0;
      flex-grow: 1;
      margin-bottom: 1rem;
      max-height: 280px;
      overflow-y: auto;
    }

    #itens-carrinho li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.3rem 0;
      border-bottom: 1px solid #eee;
    }

    #itens-carrinho li:last-child {
      border-bottom: none;
    }

    .item-info {
      flex: 1;
      font-size: 0.9rem;
      color: #444;
    }

    .item-quantidade {
      margin: 0 0.8rem;
    }

    .btn-remove-item {
      background: #e53935;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
      padding: 0 8px;
      font-size: 1rem;
      line-height: 1;
      transition: background-color 0.2s ease;
    }

    .btn-remove-item:hover,
    .btn-remove-item:focus {
      background: #b71c1c;
      outline: none;
    }

    #total {
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: var(--azul-base-light);
      text-align: right;
    }

    form#form-pedido {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    form#form-pedido label {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--azul-base-dark);
    }

    form#form-pedido input,
    form#form-pedido select,
    form#form-pedido textarea {
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 0.5rem 0.6rem;
      font-size: 1rem;
      font-family: inherit;
      resize: vertical;
      transition: border-color 0.3s ease;
    }

    form#form-pedido input:focus,
    form#form-pedido select:focus,
    form#form-pedido textarea:focus {
      border-color: var(--azul-base-light);
      outline: none;
    }

    form#form-pedido button.btn-finalizar {
      background: var(--green);
      color: var(--white);
      font-weight: 700;
      border: none;
      border-radius: 6px;
      padding: 0.7rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 0.5rem;
    }

    form#form-pedido button.btn-finalizar:hover,
    form#form-pedido button.btn-finalizar:focus {
      background: #1ebe51;
      outline: none;
    }

    /* Status do pedido */
    #status-pedidos {
      max-width: 960px;
      margin: 1rem auto 3rem;
      padding: 0 1rem;
    }

    #status-pedidos h2 {
      color: var(--azul-base);
      font-weight: 700;
      margin-bottom: 1rem;
    }

    #lista-status-pedidos p {
      color: var(--gray-dark);
      font-style: italic;
    }

    /* Footer */
    footer {
      background: var(--azul-base);
      color: var(--white);
      text-align: center;
      padding: 1rem 0.5rem;
      font-size: 0.9rem;
      user-select: none;
      box-shadow: var(--shadow);
    }

    footer a.admin-link {
      display: inline-block;
      margin-top: 0.3rem;
      color: var(--green);
      font-weight: 600;
      text-decoration: none;
    }

    footer a.admin-link:hover,
    footer a.admin-link:focus {
      text-decoration: underline;
      outline: none;
    }

    /* Responsividade */
    @media (max-width: 720px) {
      main.container {
        flex-direction: column;
        margin: 1rem;
      }

      #produtos {
        grid-template-columns: repeat(auto-fill,minmax(140px,1fr));
        margin-bottom: 2rem;
      }

      #carrinho {
        max-height: none;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>MDoces</h1>
    <p>Doces artesanais com carinho e sabor</p>
  </header>

  <main class="container">
    <!-- Produtos -->
    <section id="produtos" class="grid" aria-label="Lista de produtos dispon√≠veis">
      <!-- Produtos renderizados aqui -->
    </section>

    <!-- Carrinho + Checkout -->
    <section id="carrinho" aria-label="Carrinho e formul√°rio de finaliza√ß√£o do pedido">
      <h2>üõí Carrinho</h2>
      <ul id="itens-carrinho" aria-live="polite" aria-relevant="additions removals"></ul>
      <div id="total">Total: R$ 0,00</div>
      <form id="form-pedido" aria-label="Formul√°rio para finalizar o pedido">
        <label for="nome-cliente">Nome</label>
        <input type="text" id="nome-cliente" name="nome-cliente" required autocomplete="name" />

        <label for="endereco-cliente">Endere√ßo</label>
        <textarea id="endereco-cliente" name="endereco-cliente" rows="2" required autocomplete="street-address"></textarea>

        <label for="telefone-cliente">Telefone</label>
        <input type="tel" id="telefone-cliente" name="telefone-cliente" required placeholder="(99) 99999-9999" pattern="\(?\d{2}\)?\s?\d{4,5}-?\d{4}" autocomplete="tel" />

        <button type="submit" class="btn-finalizar" aria-label="Finalizar pedido">Finalizar pedido via WhatsApp</button>
      </form>
    </section>
  </main>

  <!-- Status dos pedidos -->
  <section id="status-pedidos" aria-label="Status dos pedidos">
    <h2>Status dos Pedidos</h2>
    <div id="lista-status-pedidos">
      <p>Nenhum pedido realizado ainda.</p>
    </div>
  </section>

  <footer>
    <div>¬© 2025 MDoces ‚Äî Doces Delivery</div>
    <a href="admin.html" class="admin-link" aria-label="Acessar √°rea administrativa">√Årea Administrativa</a>
  </footer>

  <script>
    // Dados dos produtos ‚Äî ex: id, nome, descri√ß√£o, pre√ßo, imagem
    const produtos = [
      {
        id: 1,
        nome: 'Brigadeiro',
        descricao: 'Brigadeiro cl√°ssico com chocolate belga.',
        preco: 4.5,
        imagem: 'https://i.imgur.com/Crb60Ul.jpg'
      },
      {
        id: 2,
        nome: 'Beijinho',
        descricao: 'Doce de coco com cobertura de a√ß√∫car cristal.',
        preco: 4.0,
        imagem: 'https://i.imgur.com/N5uCbDu.jpg'
      },
      {
        id: 3,
        nome: 'Cajuzinho',
        descricao: 'Doce de amendoim com cobertura de a√ß√∫car.',
        preco: 4.5,
        imagem: 'https://i.imgur.com/X8X6LTO.jpg'
      },
      {
        id: 4,
        nome: 'Palha Italiana',
        descricao: 'Mistura de brigadeiro com biscoito, delicioso!',
        preco: 6.0,
        imagem: 'https://i.imgur.com/BvM8X0L.jpg'
      }
    ];

    // Estado do carrinho ‚Äî array de { produtoId, quantidade }
    let carrinho = [];

    // Elementos DOM
    const produtosContainer = document.getElementById('produtos');
    const itensCarrinho = document.getElementById('itens-carrinho');
    const totalDisplay = document.getElementById('total');
    const formPedido = document.getElementById('form-pedido');
    const listaStatusPedidos = document.getElementById('lista-status-pedidos');

    // Fun√ß√£o para formatar pre√ßo em reais
    function formatarPreco(valor) {
      return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    // Renderizar produtos na p√°gina
    function renderizarProdutos() {
      produtosContainer.innerHTML = '';
      produtos.forEach(produto => {
        const card = document.createElement('article');
        card.className = 'produto-card';
        card.tabIndex = 0;
        card.setAttribute('role', 'button');
        card.setAttribute('aria-pressed', 'false');
        card.setAttribute('aria-label', `Adicionar ${produto.nome} ao carrinho`);

        card.innerHTML = `
          <img src="${produto.imagem}" alt="${produto.nome}" class="produto-img" />
          <div class="produto-nome">${produto.nome}</div>
          <div class="produto-descricao">${produto.descricao}</div>
          <div class="produto-preco">${formatarPreco(produto.preco)}</div>
          <button class="btn-add" aria-label="Adicionar ${produto.nome} ao carrinho">+</button>
        `;

        // Clique no card ou no bot√£o adiciona ao carrinho
        card.querySelector('.btn-add').addEventListener('click', e => {
          e.stopPropagation();
          adicionarAoCarrinho(produto.id);
        });
        card.addEventListener('click', () => {
          adicionarAoCarrinho(produto.id);
        });

        produtosContainer.appendChild(card);
      });
    }

    // Atualizar carrinho na tela
    function renderizarCarrinho() {
      itensCarrinho.innerHTML = '';
      if (carrinho.length === 0) {
        itensCarrinho.innerHTML = '<li>O carrinho est√° vazio.</li>';
        totalDisplay.textContent = 'Total: R$ 0,00';
        return;
      }

      let total = 0;
      carrinho.forEach(item => {
        const produto = produtos.find(p => p.id === item.produtoId);
        if (!produto) return;

        const li = document.createElement('li');

        li.innerHTML = `
          <span class="item-info">${produto.nome} (x${item.quantidade})</span>
          <span class="item-quantidade">${formatarPreco(produto.preco * item.quantidade)}</span>
          <button class="btn-remove-item" aria-label="Remover ${produto.nome} do carrinho">√ó</button>
        `;

        li.querySelector('.btn-remove-item').addEventListener('click', () => {
          removerDoCarrinho(produto.id);
        });

        itensCarrinho.appendChild(li);
        total += produto.preco * item.quantidade;
      });

      totalDisplay.textContent = `Total: ${formatarPreco(total)}`;
    }

    // Adicionar produto ao carrinho (incrementa quantidade)
    function adicionarAoCarrinho(produtoId) {
      const item = carrinho.find(i => i.produtoId === produtoId);
      if (item) {
        item.quantidade++;
      } else {
        carrinho.push({ produtoId, quantidade: 1 });
      }
      renderizarCarrinho();
    }

    // Remover produto do carrinho (decrementa quantidade ou remove)
    function removerDoCarrinho(produtoId) {
      const index = carrinho.findIndex(i => i.produtoId === produtoId);
      if (index === -1) return;

      if (carrinho[index].quantidade > 1) {
        carrinho[index].quantidade--;
      } else {
        carrinho.splice(index, 1);
      }
      renderizarCarrinho();
    }

    // Enviar pedido via WhatsApp
    formPedido.addEventListener('submit', e => {
      e.preventDefault();

      if (carrinho.length === 0) {
        alert('Seu carrinho est√° vazio. Adicione produtos antes de finalizar o pedido.');
        return;
      }

      const nome = formPedido['nome-cliente'].value.trim();
      const endereco = formPedido['endereco-cliente'].value.trim();
      const telefone = formPedido['telefone-cliente'].value.trim();

      if (!nome || !endereco || !telefone) {
        alert('Por favor, preencha todos os campos corretamente.');
        return;
      }

      // Montar texto do pedido
      let mensagem = `*Pedido - MDoces*\n\n*Cliente:* ${nome}\n*Endere√ßo:* ${endereco}\n*Telefone:* ${telefone}\n\n*Itens:*\n`;

      let totalPedido = 0;
      carrinho.forEach(item => {
        const produto = produtos.find(p => p.id === item.produtoId);
        if (!produto) return;
        mensagem += `- ${produto.nome} x${item.quantidade} = R$ ${(produto.preco * item.quantidade).toFixed(2)}\n`;
        totalPedido += produto.preco * item.quantidade;
      });

      mensagem += `\n*Total:* R$ ${totalPedido.toFixed(2)}`;

      // N√∫mero do WhatsApp para onde enviar (coloque o seu n√∫mero com DDD, s√≥ n√∫meros)
      const numeroWhats = '5599999999999';

      // Abrir WhatsApp Web ou app via link
      const urlWhatsapp = `https://wa.me/${numeroWhats}?text=${encodeURIComponent(mensagem)}`;

      window.open(urlWhatsapp, '_blank');

      // Limpar formul√°rio e carrinho
      formPedido.reset();
      carrinho = [];
      renderizarCarrinho();
      alert('Pedido enviado! Obrigado por comprar com a MDoces.');
    });

    // Inicializar
    renderizarProdutos();
    renderizarCarrinho();
  </script>
</body>
</html>
